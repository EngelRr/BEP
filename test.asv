clear
close all
clc
rng(1);

noStates = 1000;

sequence = rand(1e2,1);
trellis = zeros(noStates, length(sequence));

tic
for k = 1:length(sequence)
    a = sequence(k);
    c = trellis(:,k);
    tmpx = [];
    for i = 1:noStates
        b = zeros(noStates,1);
        for j = 1:noStates
            b(j) = c(j)+j*i;
        end
        tmpx(i) = b(i);
    end
    trellis(:,k) = tmpx;
end
toc

tic
for k = 1:length(sequence)
    a = sequence(k);
    c = trellis(:,k);
    tmpx = [];
    parfor i = 1:noStates
        b = zeros(noStates,1);
        %d(i) = c(i);
        for j = 1:noStates
            b(j) = d(i)+j*i;
        end
        tmpx(i) = b(i);
    end
    trellis(:,k) = tmpx;
end
toc
